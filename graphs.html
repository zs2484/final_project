<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>graphs.utf8</title>

<script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="site_libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="graphs.html">Graphs</a>
</li>
<li>
  <a href="economics_dashboard.html">Economics Dashboard</a>
</li>
<li>
  <a href="mailto:&lt;zs2484@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/zs2484/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<pre class="r"><code>daily_cases = read_csv(&quot;./data/case_daily_trends__united_states.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(
    date = mdy(case_daily_trends_united_states),
    new_cases = as.double(x2),
    seven_day_ma = as.double(x3)) %&gt;% 
  select(date, new_cases, seven_day_ma) %&gt;% 
  slice(-1:-3) %&gt;% 
  map_df(rev) </code></pre>
<p><em>To seek how COVID-19 has influenced our transportation over the past few months, we would like first to understand its progress, and we did it by graphing the daily new cases and deaths over time.</em></p>
<div id="daily-trends-in-number-of-covid-19-cases-in-the-united-states" class="section level3">
<h3>Daily Trends in Number of COVID-19 Cases in the United States</h3>
<pre class="r"><code>line.fmt = list(dash=&quot;solid&quot;, width = 1.5, color= &quot;viridius&quot;)
 
daily_cases %&gt;% 
  plot_ly(x = ~date, y = ~new_cases, type = &quot;bar&quot;, name = &quot;Daily New Cases&quot;) %&gt;% 
  add_lines( x=~date, y = ~seven_day_ma, line=line.fmt, name = &quot;7-Day Moving Average&quot;) %&gt;% 
  layout(xaxis = list(title = &quot;Date&quot;), yaxis = list(title = &quot;Daily New Cases&quot;))</code></pre>
<div id="htmlwidget-5892a22566e172830340" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5892a22566e172830340">{"x":{"visdat":{"a3db7cad4e9f":["function () ","plotlyVisDat"]},"cur_data":"a3db7cad4e9f","attrs":{"a3db7cad4e9f":{"x":{},"y":{},"name":"Daily New Cases","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"a3db7cad4e9f.1":{"x":{},"y":{},"name":"7-Day Moving Average","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","line":{"dash":"solid","width":1.5,"color":"viridius"},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Date"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Daily New Cases"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["2020-01-22","2020-01-23","2020-01-24","2020-01-25","2020-01-26","2020-01-27","2020-01-28","2020-01-29","2020-01-30","2020-01-31","2020-02-01","2020-02-02","2020-02-03","2020-02-04","2020-02-05","2020-02-06","2020-02-07","2020-02-08","2020-02-09","2020-02-10","2020-02-11","2020-02-12","2020-02-13","2020-02-14","2020-02-15","2020-02-16","2020-02-17","2020-02-18","2020-02-19","2020-02-20","2020-02-21","2020-02-22","2020-02-23","2020-02-24","2020-02-25","2020-02-26","2020-02-27","2020-02-28","2020-02-29","2020-03-01","2020-03-02","2020-03-03","2020-03-04","2020-03-05","2020-03-06","2020-03-07","2020-03-08","2020-03-09","2020-03-10","2020-03-11","2020-03-12","2020-03-13","2020-03-14","2020-03-15","2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10","2020-04-11","2020-04-12","2020-04-13","2020-04-14","2020-04-15","2020-04-16","2020-04-17","2020-04-18","2020-04-19","2020-04-20","2020-04-21","2020-04-22","2020-04-23","2020-04-24","2020-04-25","2020-04-26","2020-04-27","2020-04-28","2020-04-29","2020-04-30","2020-05-01","2020-05-02","2020-05-03","2020-05-04","2020-05-05","2020-05-06","2020-05-07","2020-05-08","2020-05-09","2020-05-10","2020-05-11","2020-05-12","2020-05-13","2020-05-14","2020-05-15","2020-05-16","2020-05-17","2020-05-18","2020-05-19","2020-05-20","2020-05-21","2020-05-22","2020-05-23","2020-05-24","2020-05-25","2020-05-26","2020-05-27","2020-05-28","2020-05-29","2020-05-30","2020-05-31","2020-06-01","2020-06-02","2020-06-03","2020-06-04","2020-06-05","2020-06-06","2020-06-07","2020-06-08","2020-06-09","2020-06-10","2020-06-11","2020-06-12","2020-06-13","2020-06-14","2020-06-15","2020-06-16","2020-06-17","2020-06-18","2020-06-19","2020-06-20","2020-06-21","2020-06-22","2020-06-23","2020-06-24","2020-06-25","2020-06-26","2020-06-27","2020-06-28","2020-06-29","2020-06-30","2020-07-01","2020-07-02","2020-07-03","2020-07-04","2020-07-05","2020-07-06","2020-07-07","2020-07-08","2020-07-09","2020-07-10","2020-07-11","2020-07-12","2020-07-13","2020-07-14","2020-07-15","2020-07-16","2020-07-17","2020-07-18","2020-07-19","2020-07-20","2020-07-21","2020-07-22","2020-07-23","2020-07-24","2020-07-25","2020-07-26","2020-07-27","2020-07-28","2020-07-29","2020-07-30","2020-07-31","2020-08-01","2020-08-02","2020-08-03","2020-08-04","2020-08-05","2020-08-06","2020-08-07","2020-08-08","2020-08-09","2020-08-10","2020-08-11","2020-08-12","2020-08-13","2020-08-14","2020-08-15","2020-08-16","2020-08-17","2020-08-18","2020-08-19","2020-08-20","2020-08-21","2020-08-22","2020-08-23","2020-08-24","2020-08-25","2020-08-26","2020-08-27","2020-08-28","2020-08-29","2020-08-30","2020-08-31","2020-09-01","2020-09-02","2020-09-03","2020-09-04","2020-09-05","2020-09-06","2020-09-07","2020-09-08","2020-09-09","2020-09-10","2020-09-11","2020-09-12","2020-09-13","2020-09-14","2020-09-15","2020-09-16","2020-09-17","2020-09-18","2020-09-19","2020-09-20","2020-09-21","2020-09-22","2020-09-23","2020-09-24","2020-09-25","2020-09-26","2020-09-27","2020-09-28","2020-09-29","2020-09-30","2020-10-01","2020-10-02","2020-10-03","2020-10-04","2020-10-05","2020-10-06","2020-10-07","2020-10-08","2020-10-09","2020-10-10","2020-10-11","2020-10-12","2020-10-13","2020-10-14","2020-10-15","2020-10-16","2020-10-17","2020-10-18","2020-10-19","2020-10-20","2020-10-21","2020-10-22","2020-10-23","2020-10-24","2020-10-25","2020-10-26","2020-10-27","2020-10-28","2020-10-29","2020-10-30","2020-10-31","2020-11-01","2020-11-02","2020-11-03","2020-11-04","2020-11-05","2020-11-06","2020-11-07"],"y":[1,0,1,0,3,0,0,0,0,2,1,0,3,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,2,0,0,0,0,0,1,0,8,6,23,25,20,66,47,64,147,225,290,278,414,267,338,1237,755,2797,3419,4777,3528,5836,8821,10934,10115,13987,16916,17965,19332,18251,22635,22562,27043,26135,34864,30683,26065,43438,21597,31534,31705,33251,33288,29145,24156,26385,27158,29164,29002,29916,25995,29468,26490,25858,37144,29873,33161,29256,23371,23901,25512,31787,30369,29794,29763,19138,22303,23366,30861,25996,26660,23792,18106,21467,20869,27191,22977,31967,13284,24481,23405,22860,20522,24268,26229,15342,24958,16429,19680,21304,18123,23553,26177,14790,24955,14676,20555,29034,29214,17919,17598,17376,20486,21744,22317,25468,21957,18577,28392,22834,27828,32218,32411,27616,26657,34313,37667,40588,44602,44703,41075,35979,43644,54357,49258,61190,50815,45774,46329,50304,64771,59260,66281,62918,60469,58858,60971,67404,72045,74710,67574,63201,57777,63028,70106,72219,74818,64582,61795,54448,59862,65935,68042,68605,58947,47576,49716,49988,53685,55836,62042,54590,48690,40522,55540,56307,52799,56729,54686,41893,38986,39318,46500,44864,46754,45265,38679,33076,37086,46393,46830,44656,44292,37532,32087,43249,39711,44671,49400,45405,34337,26146,23301,32899,37451,46045,40423,35549,34676,34305,41566,43952,48845,42561,37417,39345,49285,41310,42340,50584,49871,36335,33891,38764,45342,47046,50160,49327,36778,39548,38984,53051,54887,58302,53363,46069,46614,47459,59761,63486,70078,53157,47035,60061,60426,63656,74380,82929,83851,63195,63589,72183,81599,90155,99750,88871,69459,86190,88427,106537,117988,132830,93811],"name":"Daily New Cases","type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2020-01-22","2020-01-23","2020-01-24","2020-01-25","2020-01-26","2020-01-27","2020-01-28","2020-01-29","2020-01-30","2020-01-31","2020-02-01","2020-02-02","2020-02-03","2020-02-04","2020-02-05","2020-02-06","2020-02-07","2020-02-08","2020-02-09","2020-02-10","2020-02-11","2020-02-12","2020-02-13","2020-02-14","2020-02-15","2020-02-16","2020-02-17","2020-02-18","2020-02-19","2020-02-20","2020-02-21","2020-02-22","2020-02-23","2020-02-24","2020-02-25","2020-02-26","2020-02-27","2020-02-28","2020-02-29","2020-03-01","2020-03-02","2020-03-03","2020-03-04","2020-03-05","2020-03-06","2020-03-07","2020-03-08","2020-03-09","2020-03-10","2020-03-11","2020-03-12","2020-03-13","2020-03-14","2020-03-15","2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10","2020-04-11","2020-04-12","2020-04-13","2020-04-14","2020-04-15","2020-04-16","2020-04-17","2020-04-18","2020-04-19","2020-04-20","2020-04-21","2020-04-22","2020-04-23","2020-04-24","2020-04-25","2020-04-26","2020-04-27","2020-04-28","2020-04-29","2020-04-30","2020-05-01","2020-05-02","2020-05-03","2020-05-04","2020-05-05","2020-05-06","2020-05-07","2020-05-08","2020-05-09","2020-05-10","2020-05-11","2020-05-12","2020-05-13","2020-05-14","2020-05-15","2020-05-16","2020-05-17","2020-05-18","2020-05-19","2020-05-20","2020-05-21","2020-05-22","2020-05-23","2020-05-24","2020-05-25","2020-05-26","2020-05-27","2020-05-28","2020-05-29","2020-05-30","2020-05-31","2020-06-01","2020-06-02","2020-06-03","2020-06-04","2020-06-05","2020-06-06","2020-06-07","2020-06-08","2020-06-09","2020-06-10","2020-06-11","2020-06-12","2020-06-13","2020-06-14","2020-06-15","2020-06-16","2020-06-17","2020-06-18","2020-06-19","2020-06-20","2020-06-21","2020-06-22","2020-06-23","2020-06-24","2020-06-25","2020-06-26","2020-06-27","2020-06-28","2020-06-29","2020-06-30","2020-07-01","2020-07-02","2020-07-03","2020-07-04","2020-07-05","2020-07-06","2020-07-07","2020-07-08","2020-07-09","2020-07-10","2020-07-11","2020-07-12","2020-07-13","2020-07-14","2020-07-15","2020-07-16","2020-07-17","2020-07-18","2020-07-19","2020-07-20","2020-07-21","2020-07-22","2020-07-23","2020-07-24","2020-07-25","2020-07-26","2020-07-27","2020-07-28","2020-07-29","2020-07-30","2020-07-31","2020-08-01","2020-08-02","2020-08-03","2020-08-04","2020-08-05","2020-08-06","2020-08-07","2020-08-08","2020-08-09","2020-08-10","2020-08-11","2020-08-12","2020-08-13","2020-08-14","2020-08-15","2020-08-16","2020-08-17","2020-08-18","2020-08-19","2020-08-20","2020-08-21","2020-08-22","2020-08-23","2020-08-24","2020-08-25","2020-08-26","2020-08-27","2020-08-28","2020-08-29","2020-08-30","2020-08-31","2020-09-01","2020-09-02","2020-09-03","2020-09-04","2020-09-05","2020-09-06","2020-09-07","2020-09-08","2020-09-09","2020-09-10","2020-09-11","2020-09-12","2020-09-13","2020-09-14","2020-09-15","2020-09-16","2020-09-17","2020-09-18","2020-09-19","2020-09-20","2020-09-21","2020-09-22","2020-09-23","2020-09-24","2020-09-25","2020-09-26","2020-09-27","2020-09-28","2020-09-29","2020-09-30","2020-10-01","2020-10-02","2020-10-03","2020-10-04","2020-10-05","2020-10-06","2020-10-07","2020-10-08","2020-10-09","2020-10-10","2020-10-11","2020-10-12","2020-10-13","2020-10-14","2020-10-15","2020-10-16","2020-10-17","2020-10-18","2020-10-19","2020-10-20","2020-10-21","2020-10-22","2020-10-23","2020-10-24","2020-10-25","2020-10-26","2020-10-27","2020-10-28","2020-10-29","2020-10-30","2020-10-31","2020-11-01","2020-11-02","2020-11-03","2020-11-04","2020-11-05","2020-11-06","2020-11-07"],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,5,9,11,21,27,35,56,84,122,159,209,240,279,435,511,869,1318,1941,2407,3192,4276,5730,6775,8285,10019,12082,14010,15357,17028,18806,20672,21989,24403,26024,27141,30112,29975,30616,31412,31181,31554,31994,29239,29923,29298,28935,28328,27846,27396,28155,28170,27984,29124,29249,29712,30178,29307,28937,28888,28123,28193,27712,27785,27180,26952,26645,26513,25888,25441,24588,24440,24321,23964,23440,23008,23767,22265,23176,23453,23737,22785,22969,22149,22443,22512,21515,21061,21172,20295,19912,21460,20008,21226,20511,20404,21962,22771,21591,21993,20910,21740,21910,20950,20415,20992,21132,22705,23041,23910,25324,26316,27125,28279,29125,31244,33067,34836,36592,38515,39846,41179,43564,44802,47172,48045,48716,50195,51146,52634,54063,54790,56519,58618,60408,61932,62308,64135,65339,66004,66394,66240,66534,66920,66945,66960,66533,66332,65856,65404,64808,64211,63324,62519,60487,59811,58401,56651,54907,53970,53347,53506,52193,52986,53361,52927,52168,52181,51210,50991,48674,47273,46139,44714,43368,42909,42065,41746,41731,42011,41712,41573,41409,41268,42148,41193,40885,41563,41722,41265,40417,37567,36594,35562,35083,34371,34544,35763,37335,38573,39502,39902,40207,40474,41141,43281,43245,43014,43263,44307,44152,43373,41870,42446,43119,43058,42980,43044,43852,43883,44984,46105,47268,47844,49172,50181,51392,52350,53579,55261,55232,55370,57291,59143,59699,61256,63092,67476,69785,70289,71969,74532,76785,79188,79906,80800,84029,86350,89912,93888,98614,99320],"name":"7-Day Moving Average","type":"scatter","mode":"lines","line":{"color":"viridius","dash":"solid","width":1.5},"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The plot shows the number of daily new cases of COVID-19 from Jan.22nd to Nov.7th, 2020. We can observe an overall continuously increasing trend starts in the middle of March. Eventually, the number of daily confirmed cases reached 132830 on Nov.6th.</p>
</div>
<div id="daily-trends-in-number-of-covid-19-deaths-in-the-united-states" class="section level3">
<h3>Daily Trends in Number of COVID-19 Deaths in the United States</h3>
<pre class="r"><code>daily_deaths = read_csv(&quot;./data/death_daily_trends__united_states.csv&quot;) %&gt;%
  janitor::clean_names() %&gt;% 
  mutate(
    date = mdy(death_daily_trends_united_states),
    new_deaths = as.double(x2),
    seven_day_ma = as.double(x3)) %&gt;% 
    select(date, new_deaths, seven_day_ma) %&gt;% 
    slice(-1:-3) %&gt;% 
    map_df(rev) 

line.fmt = list(dash=&quot;solid&quot;, width = 1.5, color= &quot;viridius&quot;)
 
daily_deaths %&gt;% 
  plot_ly(x = ~date, y = ~new_deaths, type = &quot;bar&quot;, name = &quot;Daily New Deaths&quot;) %&gt;% 
  add_lines( x=~date, y = ~seven_day_ma, line=line.fmt, name = &quot;7-Day Moving Average&quot;) %&gt;% 
  layout(xaxis = list(title = &quot;Date&quot;), yaxis = list(title = &quot;Daily New Deaths&quot;))</code></pre>
<div id="htmlwidget-03184b89022901a6b64a" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-03184b89022901a6b64a">{"x":{"visdat":{"a3db5c475eab":["function () ","plotlyVisDat"]},"cur_data":"a3db5c475eab","attrs":{"a3db5c475eab":{"x":{},"y":{},"name":"Daily New Deaths","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"a3db5c475eab.1":{"x":{},"y":{},"name":"7-Day Moving Average","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","mode":"lines","line":{"dash":"solid","width":1.5,"color":"viridius"},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Date"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Daily New Deaths"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["2020-01-22","2020-01-23","2020-01-24","2020-01-25","2020-01-26","2020-01-27","2020-01-28","2020-01-29","2020-01-30","2020-01-31","2020-02-01","2020-02-02","2020-02-03","2020-02-04","2020-02-05","2020-02-06","2020-02-07","2020-02-08","2020-02-09","2020-02-10","2020-02-11","2020-02-12","2020-02-13","2020-02-14","2020-02-15","2020-02-16","2020-02-17","2020-02-18","2020-02-19","2020-02-20","2020-02-21","2020-02-22","2020-02-23","2020-02-24","2020-02-25","2020-02-26","2020-02-27","2020-02-28","2020-02-29","2020-03-01","2020-03-02","2020-03-03","2020-03-04","2020-03-05","2020-03-06","2020-03-07","2020-03-08","2020-03-09","2020-03-10","2020-03-11","2020-03-12","2020-03-13","2020-03-14","2020-03-15","2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10","2020-04-11","2020-04-12","2020-04-13","2020-04-14","2020-04-15","2020-04-16","2020-04-17","2020-04-18","2020-04-19","2020-04-20","2020-04-21","2020-04-22","2020-04-23","2020-04-24","2020-04-25","2020-04-26","2020-04-27","2020-04-28","2020-04-29","2020-04-30","2020-05-01","2020-05-02","2020-05-03","2020-05-04","2020-05-05","2020-05-06","2020-05-07","2020-05-08","2020-05-09","2020-05-10","2020-05-11","2020-05-12","2020-05-13","2020-05-14","2020-05-15","2020-05-16","2020-05-17","2020-05-18","2020-05-19","2020-05-20","2020-05-21","2020-05-22","2020-05-23","2020-05-24","2020-05-25","2020-05-26","2020-05-27","2020-05-28","2020-05-29","2020-05-30","2020-05-31","2020-06-01","2020-06-02","2020-06-03","2020-06-04","2020-06-05","2020-06-06","2020-06-07","2020-06-08","2020-06-09","2020-06-10","2020-06-11","2020-06-12","2020-06-13","2020-06-14","2020-06-15","2020-06-16","2020-06-17","2020-06-18","2020-06-19","2020-06-20","2020-06-21","2020-06-22","2020-06-23","2020-06-24","2020-06-25","2020-06-26","2020-06-27","2020-06-28","2020-06-29","2020-06-30","2020-07-01","2020-07-02","2020-07-03","2020-07-04","2020-07-05","2020-07-06","2020-07-07","2020-07-08","2020-07-09","2020-07-10","2020-07-11","2020-07-12","2020-07-13","2020-07-14","2020-07-15","2020-07-16","2020-07-17","2020-07-18","2020-07-19","2020-07-20","2020-07-21","2020-07-22","2020-07-23","2020-07-24","2020-07-25","2020-07-26","2020-07-27","2020-07-28","2020-07-29","2020-07-30","2020-07-31","2020-08-01","2020-08-02","2020-08-03","2020-08-04","2020-08-05","2020-08-06","2020-08-07","2020-08-08","2020-08-09","2020-08-10","2020-08-11","2020-08-12","2020-08-13","2020-08-14","2020-08-15","2020-08-16","2020-08-17","2020-08-18","2020-08-19","2020-08-20","2020-08-21","2020-08-22","2020-08-23","2020-08-24","2020-08-25","2020-08-26","2020-08-27","2020-08-28","2020-08-29","2020-08-30","2020-08-31","2020-09-01","2020-09-02","2020-09-03","2020-09-04","2020-09-05","2020-09-06","2020-09-07","2020-09-08","2020-09-09","2020-09-10","2020-09-11","2020-09-12","2020-09-13","2020-09-14","2020-09-15","2020-09-16","2020-09-17","2020-09-18","2020-09-19","2020-09-20","2020-09-21","2020-09-22","2020-09-23","2020-09-24","2020-09-25","2020-09-26","2020-09-27","2020-09-28","2020-09-29","2020-09-30","2020-10-01","2020-10-02","2020-10-03","2020-10-04","2020-10-05","2020-10-06","2020-10-07","2020-10-08","2020-10-09","2020-10-10","2020-10-11","2020-10-12","2020-10-13","2020-10-14","2020-10-15","2020-10-16","2020-10-17","2020-10-18","2020-10-19","2020-10-20","2020-10-21","2020-10-22","2020-10-23","2020-10-24","2020-10-25","2020-10-26","2020-10-27","2020-10-28","2020-10-29","2020-10-30","2020-10-31","2020-11-01","2020-11-02","2020-11-03","2020-11-04","2020-11-05","2020-11-06","2020-11-07"],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,5,3,1,1,1,5,2,6,4,7,5,6,4,16,8,22,53,50,57,67,76,144,193,257,252,422,444,293,455,743,910,930,1053,1120,1294,3154,691,1941,2258,1605,1927,1277,489,2330,6489,1978,2394,1759,1881,2673,2819,1804,2437,1623,2020,1463,1336,2247,2552,2349,1877,1454,1719,906,2440,2366,2309,1634,1660,985,1064,1426,1701,2043,1325,1394,698,933,1324,1397,1089,1852,1047,620,592,770,1415,1265,1074,915,696,761,1040,832,1035,1128,709,474,808,950,834,947,711,646,373,496,738,754,733,690,560,308,410,784,692,2516,651,508,885,370,560,725,572,709,268,238,322,932,991,799,811,726,492,334,773,947,926,918,877,498,473,1047,1078,1113,1145,969,564,1126,1194,1417,1216,1371,1132,469,733,1107,1320,1249,1340,1064,558,565,1244,1497,1169,1229,1150,654,490,1172,1404,1074,1155,1006,572,394,1142,1239,1167,978,1006,473,428,1033,1009,1081,986,892,462,175,459,1115,1091,1035,807,510,387,961,1231,832,963,664,281,438,813,1136,918,851,853,295,270,774,1030,900,816,703,378,361,672,900,979,926,577,494,338,748,831,892,1001,593,475,513,863,1076,1009,946,828,380,483,901,1060,1055,1009,869,405,510,1095,1141,1135,1211,1072],"name":"Daily New Deaths","type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2020-01-22","2020-01-23","2020-01-24","2020-01-25","2020-01-26","2020-01-27","2020-01-28","2020-01-29","2020-01-30","2020-01-31","2020-02-01","2020-02-02","2020-02-03","2020-02-04","2020-02-05","2020-02-06","2020-02-07","2020-02-08","2020-02-09","2020-02-10","2020-02-11","2020-02-12","2020-02-13","2020-02-14","2020-02-15","2020-02-16","2020-02-17","2020-02-18","2020-02-19","2020-02-20","2020-02-21","2020-02-22","2020-02-23","2020-02-24","2020-02-25","2020-02-26","2020-02-27","2020-02-28","2020-02-29","2020-03-01","2020-03-02","2020-03-03","2020-03-04","2020-03-05","2020-03-06","2020-03-07","2020-03-08","2020-03-09","2020-03-10","2020-03-11","2020-03-12","2020-03-13","2020-03-14","2020-03-15","2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10","2020-04-11","2020-04-12","2020-04-13","2020-04-14","2020-04-15","2020-04-16","2020-04-17","2020-04-18","2020-04-19","2020-04-20","2020-04-21","2020-04-22","2020-04-23","2020-04-24","2020-04-25","2020-04-26","2020-04-27","2020-04-28","2020-04-29","2020-04-30","2020-05-01","2020-05-02","2020-05-03","2020-05-04","2020-05-05","2020-05-06","2020-05-07","2020-05-08","2020-05-09","2020-05-10","2020-05-11","2020-05-12","2020-05-13","2020-05-14","2020-05-15","2020-05-16","2020-05-17","2020-05-18","2020-05-19","2020-05-20","2020-05-21","2020-05-22","2020-05-23","2020-05-24","2020-05-25","2020-05-26","2020-05-27","2020-05-28","2020-05-29","2020-05-30","2020-05-31","2020-06-01","2020-06-02","2020-06-03","2020-06-04","2020-06-05","2020-06-06","2020-06-07","2020-06-08","2020-06-09","2020-06-10","2020-06-11","2020-06-12","2020-06-13","2020-06-14","2020-06-15","2020-06-16","2020-06-17","2020-06-18","2020-06-19","2020-06-20","2020-06-21","2020-06-22","2020-06-23","2020-06-24","2020-06-25","2020-06-26","2020-06-27","2020-06-28","2020-06-29","2020-06-30","2020-07-01","2020-07-02","2020-07-03","2020-07-04","2020-07-05","2020-07-06","2020-07-07","2020-07-08","2020-07-09","2020-07-10","2020-07-11","2020-07-12","2020-07-13","2020-07-14","2020-07-15","2020-07-16","2020-07-17","2020-07-18","2020-07-19","2020-07-20","2020-07-21","2020-07-22","2020-07-23","2020-07-24","2020-07-25","2020-07-26","2020-07-27","2020-07-28","2020-07-29","2020-07-30","2020-07-31","2020-08-01","2020-08-02","2020-08-03","2020-08-04","2020-08-05","2020-08-06","2020-08-07","2020-08-08","2020-08-09","2020-08-10","2020-08-11","2020-08-12","2020-08-13","2020-08-14","2020-08-15","2020-08-16","2020-08-17","2020-08-18","2020-08-19","2020-08-20","2020-08-21","2020-08-22","2020-08-23","2020-08-24","2020-08-25","2020-08-26","2020-08-27","2020-08-28","2020-08-29","2020-08-30","2020-08-31","2020-09-01","2020-09-02","2020-09-03","2020-09-04","2020-09-05","2020-09-06","2020-09-07","2020-09-08","2020-09-09","2020-09-10","2020-09-11","2020-09-12","2020-09-13","2020-09-14","2020-09-15","2020-09-16","2020-09-17","2020-09-18","2020-09-19","2020-09-20","2020-09-21","2020-09-22","2020-09-23","2020-09-24","2020-09-25","2020-09-26","2020-09-27","2020-09-28","2020-09-29","2020-09-30","2020-10-01","2020-10-02","2020-10-03","2020-10-04","2020-10-05","2020-10-06","2020-10-07","2020-10-08","2020-10-09","2020-10-10","2020-10-11","2020-10-12","2020-10-13","2020-10-14","2020-10-15","2020-10-16","2020-10-17","2020-10-18","2020-10-19","2020-10-20","2020-10-21","2020-10-22","2020-10-23","2020-10-24","2020-10-25","2020-10-26","2020-10-27","2020-10-28","2020-10-29","2020-10-30","2020-10-31","2020-11-01","2020-11-02","2020-11-03","2020-11-04","2020-11-05","2020-11-06","2020-11-07"],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,4,5,4,6,7,9,16,22,30,39,47,67,91,120,149,201,255,286,330,409,502,599,689,786,929,1314,1307,1454,1644,1723,1838,1836,1455,1689,2339,2299,2412,2388,2474,2786,2856,2186,2252,2142,2179,2119,1928,1847,1954,1941,1977,1896,1933,1872,1899,1873,1867,1832,1862,1757,1779,1634,1539,1501,1457,1419,1378,1360,1345,1302,1165,1241,1191,1180,1131,1052,1055,1080,969,950,961,985,1023,940,907,915,885,854,860,848,848,835,776,767,752,708,677,666,635,632,620,611,599,605,596,851,845,838,920,915,883,887,610,618,584,491,484,538,576,608,623,688,724,726,703,697,715,730,752,753,773,812,831,857,890,903,912,1006,1027,1075,1090,1122,1145,1132,1076,1063,1049,1054,1050,1040,1053,1029,1048,1073,1062,1046,1058,1072,1061,1051,1038,1024,1014,993,981,968,963,940,953,928,928,914,919,903,870,858,859,843,841,805,723,738,740,747,734,741,772,843,860,823,813,792,759,767,746,732,744,728,755,757,733,728,713,710,705,684,695,708,694,675,687,702,684,701,698,708,699,686,697,699,696,721,738,773,790,782,815,802,797,803,801,807,816,822,826,829,857,869,880,909,938],"name":"7-Day Moving Average","type":"scatter","mode":"lines","line":{"color":"viridius","dash":"solid","width":1.5},"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The plot shows the number of daily new deaths of COVID-19 from Jan.22nd to Nov.7th, 2020. As seen in this plot, the number of daily new deaths started soaring by the end of March and reaches a peak at 6489 deaths per day on Apr.15th. The number is then observed to decrease until it reaches a plateau at around 1000 deaths per day.</p>
<p><em>After determining that the outbreak of COVID-19 took place in mid-March and still has not been under full control, we can start analyzing data within this time frame.</em></p>
<p><em>Firstly, we mapped two bubble maps to see how air transportation is affected by comparing the flight numbers’ changes since the middle of March and the number of total COVID-19 cases by states.</em></p>
<pre class="r"><code>#import data for covid_impact_on_airport_traffic
#Main Problem: join data, have date and state match for both data
# Transportation and Covid have different way to representing date(2020-01-01 in transportation date and 01/01/2020 in Covid data)
transportation = 
   read_csv(&quot;./data/covid_impact_on_airport_traffic.csv&quot; ) %&gt;%
  janitor::clean_names() %&gt;%
  filter(country != &quot;Australia&quot; &amp; country != &quot;Chile&quot; &amp; country != &quot;Canada&quot;) %&gt;% #only leave United States data 
   separate(date, c(&quot;year&quot;,&quot;month&quot;,&quot;day&quot;), sep = &quot;([-])&quot;) %&gt;%  # I re-arrange the date information so that it matched the date format in Covid data
    mutate(date = paste(month,day,year,sep = &quot;/&quot;)) %&gt;% # I re-arrange the date information so that it matched the date format in Covid data
  relocate(date) %&gt;% 
  select(-year,-month,-day,-version,-aggregation_method,-state,-country) %&gt;% #delete variable that is not in our interest
    rename(state = iso_3166_2) %&gt;% #rename state variable so that we can combine two data 
  mutate(state=gsub(&quot;US-&quot;,&quot;&quot;,state)) # reformat state variable, delete prefix of US-

Covid =  
  read_csv(&quot;./data/United_States_COVID-19_Cases_and_Deaths_by_State_over_Time.csv&quot; ) %&gt;%
  janitor::clean_names() %&gt;%
  filter(consent_cases == &quot;Agree&quot; | consent_deaths == &quot;Agree&quot;)%&gt;% #need to decided whether this step is necessary
  select(&quot;submission_date&quot;:&quot;pnew_death&quot;) %&gt;% #select variable of interest, need to look further into which variable we are interested in and way
    rename(date = submission_date)  # rename date variable so that we can match data accordingly
  

Covid_transport_data = 
  left_join(transportation, Covid, by = c(&quot;date&quot;)) %&gt;% #left join two data, by date
  filter(state.y == state.x) 
  #filter the data so that we only leave the data that have matching date and state</code></pre>
</div>
<div id="air-transportation-bubble-map" class="section level3">
<h3>Air Transportation Bubble Map</h3>
<pre class="r"><code>transport_state = 
  Covid_transport_data %&gt;% 
  mutate(centroid=gsub(&quot;POINT\\D&quot;,&quot;&quot;,centroid)) %&gt;% 
  separate(centroid, into = c(&quot;long&quot;, &quot;lat&quot;), sep = 17) %&gt;% 
  mutate(across(where(is.character), str_trim)) %&gt;% 
  group_by (airport_name, long, lat, state.x) %&gt;% 
  summarize(
    mean_percent_base = mean(percent_of_baseline)
    ) %&gt;% 
  mutate(long = round(as.double(long),digits = 0),
         lat = round(as.double(str_remove(lat,&quot;\\)&quot;))),digits = 2,
         mean_percent_base = round(mean_percent_base, digits = 2))

mybins &lt;- seq(40, 90, by=10)
mypalette &lt;- colorBin( palette=&quot;magma&quot;, domain=transport_state$mean_percent_base,  bins=mybins)
mytext = paste(
   &quot;Longitude: &quot;, transport_state$long, 
   &quot;Latitude: &quot;, transport_state$lat, 
   &quot;Percent of baseline: &quot;, transport_state$mean_percent_base) %&gt;%
  lapply(htmltools::HTML)

m &lt;- leaflet(transport_state) %&gt;% 
  addTiles()  %&gt;% 
  addProviderTiles(&quot;CartoDB.Positron&quot;) %&gt;%
  addCircleMarkers(~long, ~lat, 
    fillColor = ~mypalette(mean_percent_base),
    fillOpacity = 0.7, 
    color=&quot;white&quot;, 
    radius = ~ mean_percent_base/2,
    stroke = FALSE, 
    label = mytext,
    labelOptions = labelOptions( style = list(&quot;font-weight&quot; = &quot;normal&quot;, padding = &quot;3px 8px&quot;), textsize = &quot;13px&quot;, direction = &quot;auto&quot;)
  ) %&gt;%
  addLegend( pal= mypalette, values=~mean_percent_base, opacity=1, title = &quot;Percent of baseline&quot;, position = &quot;bottomright&quot; )
  
m</code></pre>
<div id="htmlwidget-14c911b33bf9f0484386" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-14c911b33bf9f0484386">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[42,35,42,40,42,41,39],[-71,-81,-88,-105,-83,-74,-77],[32.125,37.88,36.07,27.645,23.545,42.665,27.495],null,null,{"interactive":true,"className":"","stroke":false,"color":"white","weight":5,"opacity":0.5,"fill":true,"fillColor":["#B6367A","#FB8861","#FB8861","#51127C","#000004","#FCFDBF","#51127C"],"fillOpacity":0.7},null,null,null,null,["Longitude:  -71 Latitude:  42 Percent of baseline:  64.25","Longitude:  -81 Latitude:  35 Percent of baseline:  75.76","Longitude:  -88 Latitude:  42 Percent of baseline:  72.14","Longitude:  -105 Latitude:  40 Percent of baseline:  55.29","Longitude:  -83 Latitude:  42 Percent of baseline:  47.09","Longitude:  -74 Latitude:  41 Percent of baseline:  85.33","Longitude:  -77 Latitude:  39 Percent of baseline:  54.99"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"13px","textOnly":false,"style":{"font-weight":"normal","padding":"3px 8px"},"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#000004","#51127C","#B6367A","#FB8861","#FCFDBF"],"labels":["40 &ndash; 50","50 &ndash; 60","60 &ndash; 70","70 &ndash; 80","80 &ndash; 90"],"na_color":null,"na_label":"NA","opacity":1,"position":"bottomright","type":"bin","title":"Percent of baseline","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[35,42],"lng":[-105,-71]}},"evals":[],"jsHooks":[]}</script>
<p>The air transportation bubble map shows a comparison of the different proportions of the average number of trips from Mar.16th to Oct.16th, 2020, to the average baseline number of trips during the same period among the seven major airports in the US States:</p>
<p>• Boston Logan International</p>
<p>• Charlotte Douglas International</p>
<p>• Chicago O’Hare International</p>
<p>• Denver International</p>
<p>• Detroit Metropolitan Wayne County</p>
<p>• Newark Liberty International</p>
<p>•Washington Dulles International</p>
<p>The larger the bubble is, the greater the percent of baseline and the smaller difference from the baseline will be. For Instances, we can see that the proportion corresponding to Newark Liberty International Airport (NJ) is the greatest, while the proportion corresponding to Washington Dulles International (VA) is the smallest. This difference implies that COVID-19 has brought a much more severe impact to air transportation in New Jersey than in Virginia.</p>
</div>
<div id="covid-bubble-map" class="section level3">
<h3>Covid Bubble Map</h3>
<pre class="r"><code>case_state = 
  Covid_transport_data %&gt;% 
  mutate(centroid=gsub(&quot;POINT\\D&quot;,&quot;&quot;,centroid)) %&gt;% 
  separate(centroid, into = c(&quot;long&quot;, &quot;lat&quot;), sep = 17) %&gt;% 
  mutate(across(where(is.character), str_trim)) %&gt;% 
  group_by (airport_name, long, lat, state.x) %&gt;% 
  summarize(
    total_cases = max(tot_cases)
    ) %&gt;% 
  mutate(long = round(as.double(long),digits = 0),
         lat = round(as.double(str_remove(lat,&quot;\\)&quot;))),digits = 2
         )

mybins &lt;- seq(80000, 380000, by=50000)
mypalette &lt;- colorBin( palette=&quot;magma&quot;, domain=case_state$total_cases,  bins=mybins)

mytext = paste(
   &quot;Longitude: &quot;, case_state$long, 
   &quot;Latitude: &quot;, case_state$lat, 
   &quot;Total Cases: &quot;, case_state$total_cases) %&gt;%
  lapply(htmltools::HTML)

n &lt;- leaflet(case_state) %&gt;% 
  addTiles()  %&gt;% 
  addProviderTiles(&quot;CartoDB.Positron&quot;) %&gt;%
  addCircleMarkers(~long, ~lat, 
    fillColor = ~mypalette(total_cases),
    fillOpacity = 0.7, 
    color=&quot;white&quot;, 
    radius = ~ sqrt(total_cases/8000)*7,
    stroke = FALSE, 
    label = mytext,
    labelOptions = labelOptions( style = list(&quot;font-weight&quot; = &quot;normal&quot;, padding = &quot;3px 8px&quot;), textsize = &quot;13px&quot;, direction = &quot;auto&quot;)
  ) %&gt;%
  addLegend( pal= mypalette, values=~total_cases, opacity=1, title = &quot;Total cases&quot;, position = &quot;bottomright&quot; )
  
n</code></pre>
<div id="htmlwidget-d60750a0f1fd8c84d711" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-d60750a0f1fd8c84d711">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[42,35,42,40,42,41,39],[-71,-81,-88,-105,-83,-74,-77],[30.2349156605405,38.4699996750715,45.6183748614525,22.5783912181537,31.2186462710989,36.5246423664901,31.8132480265691],null,null,{"interactive":true,"className":"","stroke":false,"color":"white","weight":5,"opacity":0.5,"fill":true,"fillColor":["#3B0F70","#DE4968","#FCFDBF","#000004","#3B0F70","#8C2981","#3B0F70"],"fillOpacity":0.7},null,null,null,null,["Longitude:  -71 Latitude:  42 Total Cases:  149249","Longitude:  -81 Latitude:  35 Total Cases:  241623","Longitude:  -88 Latitude:  42 Total Cases:  339761","Longitude:  -105 Latitude:  40 Total Cases:  83230","Longitude:  -83 Latitude:  42 Total Cases:  159119","Longitude:  -74 Latitude:  41 Total Cases:  217804","Longitude:  -77 Latitude:  39 Total Cases:  165238"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"13px","textOnly":false,"style":{"font-weight":"normal","padding":"3px 8px"},"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#000004","#3B0F70","#8C2981","#DE4968","#FE9F6D","#FCFDBF"],"labels":["80,000 &ndash; 130,000","130,000 &ndash; 180,000","180,000 &ndash; 230,000","230,000 &ndash; 280,000","280,000 &ndash; 330,000","330,000 &ndash; 380,000"],"na_color":null,"na_label":"NA","opacity":1,"position":"bottomright","type":"bin","title":"Total cases","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[35,42],"lng":[-105,-71]}},"evals":[],"jsHooks":[]}</script>
<p>The COVID bubble map provides information on the number of total COVID-19 cases from Mar.16th to Oct.16th by states. The larger the bubble size is, the larger number of the total COVID-19 cases is. As seen in this plot, Illinois, North Carolina, and New Jersey have a relatively greater number of total cases, while Colorado has the smallest number of total cases.</p>
<p><em>By comparing the two bubble maps, we can see an association between the flights and the number of total COVID-19 cases from Mar.16th to Oct.16th. For the states, such as New Jersey, the percent of baseline for the flights is relatively smaller with more total cases, suggesting that as the number of total cases increases, the impact of COVID-19 brought to the air transportation will also be increased.</em></p>
<p><em>Furthermore, we tried to understand how ground transportations (subway, bus, and train) were affected by examining the changes of visits and length of stay at public transport hubs from the baseline (the median value, for the corresponding day of the week, during the 5-week period from Jan 3 to Feb 6, 2020).</em></p>
</div>
<div id="daily-mobility-trends-for-grond-transport-hubs" class="section level3">
<h3>Daily Mobility Trends for Grond Transport Hubs</h3>
<pre class="r"><code>#TRY to make plot about the relationship between mean_transit station percent change and date
Covid_mobility_data %&gt;%
  group_by(date,state) %&gt;%
   filter(!is.na(transit_stations_percent_change_from_baseline)) %&gt;%
  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
            mean_newcases = mean(new_case),
            n = n()) %&gt;%
  ggplot(aes(x = date,y = mean_transit,color = state)) +
 geom_line(alpha=0.3) +
 scale_x_date(date_breaks = &quot;1 month&quot;)</code></pre>
<p><img src="graphs_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>The graph depicts the average mobility changes in public transport hubs over time. We can see a noticeable drop in mobility from the plot since March for all states and did not completely rebound until the middle of June, which matches the trend of the COVID-19 progress.</p>
<pre class="r"><code>#Covid_mobility_data %&gt;%
#  group_by(date,state) %&gt;%
#   filter(!is.na(transit_stations_percent_change_from_baseline)) %&gt;%
#  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
#            sum_newcases = sum(new_case),
#            n = n()) %&gt;%
#  ggplot(aes(x = date,y = sum_newcases,color = state)) +
# geom_point(alpha=0.3) +
# scale_x_date(date_breaks = &quot;1 month&quot;)</code></pre>
<pre class="r"><code>#Covid_mobility_data %&gt;%
#  group_by(date,state) %&gt;%
#   filter(!is.na(transit_stations_percent_change_from_baseline) &amp; new_case &gt;0) #%&gt;%
#  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
#            sum_newcases = sum(new_case),
#            n = n()) %&gt;%
#  ggplot(aes(x = sum_newcases,y = mean_transit,color = state)) +
# geom_point(alpha=0.3)</code></pre>
<pre class="r"><code>#Covid_mobility_data %&gt;%
#  group_by(date,state) %&gt;%
#   filter(!is.na(transit_stations_percent_change_from_baseline) &amp; new_case &gt;0) #%&gt;%
#  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
#            sum_tot_cases = sum(tot_cases),
#            n = n()) %&gt;%
#  ggplot(aes(x = mean_transit,y = sum_tot_cases,color = state)) +
# geom_point(alpha=0.3)</code></pre>
<p><em>Similar to air transportation, we graphed to see the different magnitude of changes by states.</em></p>
</div>
<div id="average-mobility-changes-by-states" class="section level3">
<h3>Average Mobility Changes by States</h3>
<pre class="r"><code>#use plotly to compare the mean transit among each state
Covid_mobility_data %&gt;%
  group_by(state) %&gt;%
   filter(!is.na(transit_stations_percent_change_from_baseline) &amp; new_case &gt;0) %&gt;%
  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
            n = n()) %&gt;%
  mutate(state = fct_reorder(state, mean_transit)) %&gt;% 
   plot_ly(x = ~state, y = ~mean_transit, color = ~state, type = &quot;bar&quot;, colors = &quot;viridis&quot;)</code></pre>
<div id="htmlwidget-0bc395abf65e30f797a2" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-0bc395abf65e30f797a2">{"x":{"visdat":{"a3db57bebdfd":["function () ","plotlyVisDat"]},"cur_data":"a3db57bebdfd","attrs":{"a3db57bebdfd":{"x":{},"y":{},"color":{},"colors":"viridis","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"state","type":"category","categoryorder":"array","categoryarray":["MA","NJ","MD","MN","CT","DE","CO","MI","LA","VA","PA","AZ","NC","ME","IL","OR","WI","UT","MS","AL","TN","KY","KS","SC","WV","OH","IN","MT","OK","SD","ID","WY"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"mean_transit"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["MA"],"y":[-32.6274233345083],"type":"bar","name":"MA","marker":{"color":"rgba(68,1,84,1)","line":{"color":"rgba(68,1,84,1)"}},"textfont":{"color":"rgba(68,1,84,1)"},"error_y":{"color":"rgba(68,1,84,1)"},"error_x":{"color":"rgba(68,1,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["NJ"],"y":[-30.6806986117331],"type":"bar","name":"NJ","marker":{"color":"rgba(71,13,96,1)","line":{"color":"rgba(71,13,96,1)"}},"textfont":{"color":"rgba(71,13,96,1)"},"error_y":{"color":"rgba(71,13,96,1)"},"error_x":{"color":"rgba(71,13,96,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MD"],"y":[-28.3705673758865],"type":"bar","name":"MD","marker":{"color":"rgba(72,25,107,1)","line":{"color":"rgba(72,25,107,1)"}},"textfont":{"color":"rgba(72,25,107,1)"},"error_y":{"color":"rgba(72,25,107,1)"},"error_x":{"color":"rgba(72,25,107,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MN"],"y":[-28.0613901572806],"type":"bar","name":"MN","marker":{"color":"rgba(72,36,117,1)","line":{"color":"rgba(72,36,117,1)"}},"textfont":{"color":"rgba(72,36,117,1)"},"error_y":{"color":"rgba(72,36,117,1)"},"error_x":{"color":"rgba(72,36,117,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["CT"],"y":[-27.3095416979715],"type":"bar","name":"CT","marker":{"color":"rgba(71,46,124,1)","line":{"color":"rgba(71,46,124,1)"}},"textfont":{"color":"rgba(71,46,124,1)"},"error_y":{"color":"rgba(71,46,124,1)"},"error_x":{"color":"rgba(71,46,124,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["DE"],"y":[-19.3352601156069],"type":"bar","name":"DE","marker":{"color":"rgba(69,56,130,1)","line":{"color":"rgba(69,56,130,1)"}},"textfont":{"color":"rgba(69,56,130,1)"},"error_y":{"color":"rgba(69,56,130,1)"},"error_x":{"color":"rgba(69,56,130,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["CO"],"y":[-18.4142889238373],"type":"bar","name":"CO","marker":{"color":"rgba(66,65,134,1)","line":{"color":"rgba(66,65,134,1)"}},"textfont":{"color":"rgba(66,65,134,1)"},"error_y":{"color":"rgba(66,65,134,1)"},"error_x":{"color":"rgba(66,65,134,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MI"],"y":[-18.3799237611182],"type":"bar","name":"MI","marker":{"color":"rgba(62,75,138,1)","line":{"color":"rgba(62,75,138,1)"}},"textfont":{"color":"rgba(62,75,138,1)"},"error_y":{"color":"rgba(62,75,138,1)"},"error_x":{"color":"rgba(62,75,138,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["LA"],"y":[-16.6392203659507],"type":"bar","name":"LA","marker":{"color":"rgba(58,84,140,1)","line":{"color":"rgba(58,84,140,1)"}},"textfont":{"color":"rgba(58,84,140,1)"},"error_y":{"color":"rgba(58,84,140,1)"},"error_x":{"color":"rgba(58,84,140,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["VA"],"y":[-16.4799768518519],"type":"bar","name":"VA","marker":{"color":"rgba(54,93,141,1)","line":{"color":"rgba(54,93,141,1)"}},"textfont":{"color":"rgba(54,93,141,1)"},"error_y":{"color":"rgba(54,93,141,1)"},"error_x":{"color":"rgba(54,93,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["PA"],"y":[-16.3671075957998],"type":"bar","name":"PA","marker":{"color":"rgba(50,101,142,1)","line":{"color":"rgba(50,101,142,1)"}},"textfont":{"color":"rgba(50,101,142,1)"},"error_y":{"color":"rgba(50,101,142,1)"},"error_x":{"color":"rgba(50,101,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["AZ"],"y":[-15.0290556900726],"type":"bar","name":"AZ","marker":{"color":"rgba(46,109,142,1)","line":{"color":"rgba(46,109,142,1)"}},"textfont":{"color":"rgba(46,109,142,1)"},"error_y":{"color":"rgba(46,109,142,1)"},"error_x":{"color":"rgba(46,109,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["NC"],"y":[-14.1493475108748],"type":"bar","name":"NC","marker":{"color":"rgba(43,117,142,1)","line":{"color":"rgba(43,117,142,1)"}},"textfont":{"color":"rgba(43,117,142,1)"},"error_y":{"color":"rgba(43,117,142,1)"},"error_x":{"color":"rgba(43,117,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["ME"],"y":[-11.5781071835804],"type":"bar","name":"ME","marker":{"color":"rgba(40,125,142,1)","line":{"color":"rgba(40,125,142,1)"}},"textfont":{"color":"rgba(40,125,142,1)"},"error_y":{"color":"rgba(40,125,142,1)"},"error_x":{"color":"rgba(40,125,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["IL"],"y":[-10.8318175041002],"type":"bar","name":"IL","marker":{"color":"rgba(37,132,142,1)","line":{"color":"rgba(37,132,142,1)"}},"textfont":{"color":"rgba(37,132,142,1)"},"error_y":{"color":"rgba(37,132,142,1)"},"error_x":{"color":"rgba(37,132,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["OR"],"y":[-7.87554904831625],"type":"bar","name":"OR","marker":{"color":"rgba(34,140,141,1)","line":{"color":"rgba(34,140,141,1)"}},"textfont":{"color":"rgba(34,140,141,1)"},"error_y":{"color":"rgba(34,140,141,1)"},"error_x":{"color":"rgba(34,140,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["WI"],"y":[-7.48685540950455],"type":"bar","name":"WI","marker":{"color":"rgba(31,148,140,1)","line":{"color":"rgba(31,148,140,1)"}},"textfont":{"color":"rgba(31,148,140,1)"},"error_y":{"color":"rgba(31,148,140,1)"},"error_x":{"color":"rgba(31,148,140,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["UT"],"y":[-6.47947693425354],"type":"bar","name":"UT","marker":{"color":"rgba(30,156,137,1)","line":{"color":"rgba(30,156,137,1)"}},"textfont":{"color":"rgba(30,156,137,1)"},"error_y":{"color":"rgba(30,156,137,1)"},"error_x":{"color":"rgba(30,156,137,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MS"],"y":[-6.29245283018868],"type":"bar","name":"MS","marker":{"color":"rgba(32,163,134,1)","line":{"color":"rgba(32,163,134,1)"}},"textfont":{"color":"rgba(32,163,134,1)"},"error_y":{"color":"rgba(32,163,134,1)"},"error_x":{"color":"rgba(32,163,134,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["AL"],"y":[-6.14433463571593],"type":"bar","name":"AL","marker":{"color":"rgba(37,171,130,1)","line":{"color":"rgba(37,171,130,1)"}},"textfont":{"color":"rgba(37,171,130,1)"},"error_y":{"color":"rgba(37,171,130,1)"},"error_x":{"color":"rgba(37,171,130,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["TN"],"y":[-5.46196319018405],"type":"bar","name":"TN","marker":{"color":"rgba(46,179,124,1)","line":{"color":"rgba(46,179,124,1)"}},"textfont":{"color":"rgba(46,179,124,1)"},"error_y":{"color":"rgba(46,179,124,1)"},"error_x":{"color":"rgba(46,179,124,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["KY"],"y":[-4.88641376268196],"type":"bar","name":"KY","marker":{"color":"rgba(57,186,118,1)","line":{"color":"rgba(57,186,118,1)"}},"textfont":{"color":"rgba(57,186,118,1)"},"error_y":{"color":"rgba(57,186,118,1)"},"error_x":{"color":"rgba(57,186,118,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["KS"],"y":[-4.47506172839506],"type":"bar","name":"KS","marker":{"color":"rgba(72,193,110,1)","line":{"color":"rgba(72,193,110,1)"}},"textfont":{"color":"rgba(72,193,110,1)"},"error_y":{"color":"rgba(72,193,110,1)"},"error_x":{"color":"rgba(72,193,110,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["SC"],"y":[-4.44452887537994],"type":"bar","name":"SC","marker":{"color":"rgba(88,199,101,1)","line":{"color":"rgba(88,199,101,1)"}},"textfont":{"color":"rgba(88,199,101,1)"},"error_y":{"color":"rgba(88,199,101,1)"},"error_x":{"color":"rgba(88,199,101,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["WV"],"y":[-2.54464813719692],"type":"bar","name":"WV","marker":{"color":"rgba(106,205,91,1)","line":{"color":"rgba(106,205,91,1)"}},"textfont":{"color":"rgba(106,205,91,1)"},"error_y":{"color":"rgba(106,205,91,1)"},"error_x":{"color":"rgba(106,205,91,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["OH"],"y":[-1.4098552078468],"type":"bar","name":"OH","marker":{"color":"rgba(126,211,79,1)","line":{"color":"rgba(126,211,79,1)"}},"textfont":{"color":"rgba(126,211,79,1)"},"error_y":{"color":"rgba(126,211,79,1)"},"error_x":{"color":"rgba(126,211,79,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["IN"],"y":[-0.296731286260082],"type":"bar","name":"IN","marker":{"color":"rgba(147,215,65,1)","line":{"color":"rgba(147,215,65,1)"}},"textfont":{"color":"rgba(147,215,65,1)"},"error_y":{"color":"rgba(147,215,65,1)"},"error_x":{"color":"rgba(147,215,65,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MT"],"y":[0.0386235955056181],"type":"bar","name":"MT","marker":{"color":"rgba(168,219,52,1)","line":{"color":"rgba(168,219,52,1)"}},"textfont":{"color":"rgba(168,219,52,1)"},"error_y":{"color":"rgba(168,219,52,1)"},"error_x":{"color":"rgba(168,219,52,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["OK"],"y":[0.29895178197065],"type":"bar","name":"OK","marker":{"color":"rgba(190,223,38,1)","line":{"color":"rgba(190,223,38,1)"}},"textfont":{"color":"rgba(190,223,38,1)"},"error_y":{"color":"rgba(190,223,38,1)"},"error_x":{"color":"rgba(190,223,38,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["SD"],"y":[5.72155287817938],"type":"bar","name":"SD","marker":{"color":"rgba(212,226,26,1)","line":{"color":"rgba(212,226,26,1)"}},"textfont":{"color":"rgba(212,226,26,1)"},"error_y":{"color":"rgba(212,226,26,1)"},"error_x":{"color":"rgba(212,226,26,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["ID"],"y":[8.25039787798408],"type":"bar","name":"ID","marker":{"color":"rgba(233,229,26,1)","line":{"color":"rgba(233,229,26,1)"}},"textfont":{"color":"rgba(233,229,26,1)"},"error_y":{"color":"rgba(233,229,26,1)"},"error_x":{"color":"rgba(233,229,26,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["WY"],"y":[15.2156424581006],"type":"bar","name":"WY","marker":{"color":"rgba(253,231,37,1)","line":{"color":"rgba(253,231,37,1)"}},"textfont":{"color":"rgba(253,231,37,1)"},"error_y":{"color":"rgba(253,231,37,1)"},"error_x":{"color":"rgba(253,231,37,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>This bar plot shows each state’s average mobility change from Feb.15 to Oct.27. The percent changes from baseline for each state are shown along the bars. We can see that most northeastern states, like Massachusetts (MA), New Jersey (NJ) and Maryland (MD) have considerable negative changes, indicating the use of ground transport in these states has decreased dramatically. While some northwestern states, such as Wyoming (WY), South Dakota (SD), and Idaho (ID), seem to have positive changes, referring to an increase in the use of ground transport.</p>
</div>
<div id="number-of-total-covid-19-cases-by-states" class="section level3">
<h3>Number of Total COVID-19 Cases by States</h3>
<pre class="r"><code>#use plotly to compare the mean transit among each state
Covid_mobility_data %&gt;%
  group_by(state) %&gt;%
   filter(!is.na(transit_stations_percent_change_from_baseline) &amp; new_case &gt;0) %&gt;%
  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
            sum_new_cases = sum(new_case),
            n = n()) %&gt;%
  mutate(state = fct_reorder(state, sum_new_cases)) %&gt;% 
   plot_ly(x = ~state, y = ~sum_new_cases, color = ~state, type = &quot;bar&quot;, colors = &quot;viridis&quot;)</code></pre>
<div id="htmlwidget-3100036c5829a0090080" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3100036c5829a0090080">{"x":{"visdat":{"a3db7ea4e039":["function () ","plotlyVisDat"]},"cur_data":"a3db7ea4e039","attrs":{"a3db7ea4e039":{"x":{},"y":{},"color":{},"colors":"viridis","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"state","type":"category","categoryorder":"array","categoryarray":["ME","DE","WY","SD","WV","MT","CT","ID","OR","KS","UT","MN","MD","MS","CO","KY","MA","OK","AZ","MI","AL","WI","SC","LA","NJ","IN","PA","VA","TN","NC","OH","IL"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"sum_new_cases"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["ME"],"y":[28434],"type":"bar","name":"ME","marker":{"color":"rgba(68,1,84,1)","line":{"color":"rgba(68,1,84,1)"}},"textfont":{"color":"rgba(68,1,84,1)"},"error_y":{"color":"rgba(68,1,84,1)"},"error_x":{"color":"rgba(68,1,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["DE"],"y":[88495],"type":"bar","name":"DE","marker":{"color":"rgba(71,13,96,1)","line":{"color":"rgba(71,13,96,1)"}},"textfont":{"color":"rgba(71,13,96,1)"},"error_y":{"color":"rgba(71,13,96,1)"},"error_x":{"color":"rgba(71,13,96,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["WY"],"y":[99675],"type":"bar","name":"WY","marker":{"color":"rgba(72,25,107,1)","line":{"color":"rgba(72,25,107,1)"}},"textfont":{"color":"rgba(72,25,107,1)"},"error_y":{"color":"rgba(72,25,107,1)"},"error_x":{"color":"rgba(72,25,107,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["SD"],"y":[132151],"type":"bar","name":"SD","marker":{"color":"rgba(72,36,117,1)","line":{"color":"rgba(72,36,117,1)"}},"textfont":{"color":"rgba(72,36,117,1)"},"error_y":{"color":"rgba(72,36,117,1)"},"error_x":{"color":"rgba(72,36,117,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["WV"],"y":[156716],"type":"bar","name":"WV","marker":{"color":"rgba(71,46,124,1)","line":{"color":"rgba(71,46,124,1)"}},"textfont":{"color":"rgba(71,46,124,1)"},"error_y":{"color":"rgba(71,46,124,1)"},"error_x":{"color":"rgba(71,46,124,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MT"],"y":[221293],"type":"bar","name":"MT","marker":{"color":"rgba(69,56,130,1)","line":{"color":"rgba(69,56,130,1)"}},"textfont":{"color":"rgba(69,56,130,1)"},"error_y":{"color":"rgba(69,56,130,1)"},"error_x":{"color":"rgba(69,56,130,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["CT"],"y":[481074],"type":"bar","name":"CT","marker":{"color":"rgba(66,65,134,1)","line":{"color":"rgba(66,65,134,1)"}},"textfont":{"color":"rgba(66,65,134,1)"},"error_y":{"color":"rgba(66,65,134,1)"},"error_x":{"color":"rgba(66,65,134,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["ID"],"y":[532012],"type":"bar","name":"ID","marker":{"color":"rgba(62,75,138,1)","line":{"color":"rgba(62,75,138,1)"}},"textfont":{"color":"rgba(62,75,138,1)"},"error_y":{"color":"rgba(62,75,138,1)"},"error_x":{"color":"rgba(62,75,138,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["OR"],"y":[748288],"type":"bar","name":"OR","marker":{"color":"rgba(58,84,140,1)","line":{"color":"rgba(58,84,140,1)"}},"textfont":{"color":"rgba(58,84,140,1)"},"error_y":{"color":"rgba(58,84,140,1)"},"error_x":{"color":"rgba(58,84,140,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["KS"],"y":[1004450],"type":"bar","name":"KS","marker":{"color":"rgba(54,93,141,1)","line":{"color":"rgba(54,93,141,1)"}},"textfont":{"color":"rgba(54,93,141,1)"},"error_y":{"color":"rgba(54,93,141,1)"},"error_x":{"color":"rgba(54,93,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["UT"],"y":[1288272],"type":"bar","name":"UT","marker":{"color":"rgba(50,101,142,1)","line":{"color":"rgba(50,101,142,1)"}},"textfont":{"color":"rgba(50,101,142,1)"},"error_y":{"color":"rgba(50,101,142,1)"},"error_x":{"color":"rgba(50,101,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MN"],"y":[1357807],"type":"bar","name":"MN","marker":{"color":"rgba(46,109,142,1)","line":{"color":"rgba(46,109,142,1)"}},"textfont":{"color":"rgba(46,109,142,1)"},"error_y":{"color":"rgba(46,109,142,1)"},"error_x":{"color":"rgba(46,109,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MD"],"y":[1829098],"type":"bar","name":"MD","marker":{"color":"rgba(43,117,142,1)","line":{"color":"rgba(43,117,142,1)"}},"textfont":{"color":"rgba(43,117,142,1)"},"error_y":{"color":"rgba(43,117,142,1)"},"error_x":{"color":"rgba(43,117,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MS"],"y":[1888015],"type":"bar","name":"MS","marker":{"color":"rgba(40,125,142,1)","line":{"color":"rgba(40,125,142,1)"}},"textfont":{"color":"rgba(40,125,142,1)"},"error_y":{"color":"rgba(40,125,142,1)"},"error_x":{"color":"rgba(40,125,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["CO"],"y":[1927114],"type":"bar","name":"CO","marker":{"color":"rgba(37,132,142,1)","line":{"color":"rgba(37,132,142,1)"}},"textfont":{"color":"rgba(37,132,142,1)"},"error_y":{"color":"rgba(37,132,142,1)"},"error_x":{"color":"rgba(37,132,142,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["KY"],"y":[1948659],"type":"bar","name":"KY","marker":{"color":"rgba(34,140,141,1)","line":{"color":"rgba(34,140,141,1)"}},"textfont":{"color":"rgba(34,140,141,1)"},"error_y":{"color":"rgba(34,140,141,1)"},"error_x":{"color":"rgba(34,140,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MA"],"y":[2023944],"type":"bar","name":"MA","marker":{"color":"rgba(31,148,140,1)","line":{"color":"rgba(31,148,140,1)"}},"textfont":{"color":"rgba(31,148,140,1)"},"error_y":{"color":"rgba(31,148,140,1)"},"error_x":{"color":"rgba(31,148,140,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["OK"],"y":[2665525],"type":"bar","name":"OK","marker":{"color":"rgba(30,156,137,1)","line":{"color":"rgba(30,156,137,1)"}},"textfont":{"color":"rgba(30,156,137,1)"},"error_y":{"color":"rgba(30,156,137,1)"},"error_x":{"color":"rgba(30,156,137,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["AZ"],"y":[3040585],"type":"bar","name":"AZ","marker":{"color":"rgba(32,163,134,1)","line":{"color":"rgba(32,163,134,1)"}},"textfont":{"color":"rgba(32,163,134,1)"},"error_y":{"color":"rgba(32,163,134,1)"},"error_x":{"color":"rgba(32,163,134,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["MI"],"y":[3287686],"type":"bar","name":"MI","marker":{"color":"rgba(37,171,130,1)","line":{"color":"rgba(37,171,130,1)"}},"textfont":{"color":"rgba(37,171,130,1)"},"error_y":{"color":"rgba(37,171,130,1)"},"error_x":{"color":"rgba(37,171,130,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["AL"],"y":[3495854],"type":"bar","name":"AL","marker":{"color":"rgba(46,179,124,1)","line":{"color":"rgba(46,179,124,1)"}},"textfont":{"color":"rgba(46,179,124,1)"},"error_y":{"color":"rgba(46,179,124,1)"},"error_x":{"color":"rgba(46,179,124,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["WI"],"y":[3659926],"type":"bar","name":"WI","marker":{"color":"rgba(57,186,118,1)","line":{"color":"rgba(57,186,118,1)"}},"textfont":{"color":"rgba(57,186,118,1)"},"error_y":{"color":"rgba(57,186,118,1)"},"error_x":{"color":"rgba(57,186,118,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["SC"],"y":[3760854],"type":"bar","name":"SC","marker":{"color":"rgba(72,193,110,1)","line":{"color":"rgba(72,193,110,1)"}},"textfont":{"color":"rgba(72,193,110,1)"},"error_y":{"color":"rgba(72,193,110,1)"},"error_x":{"color":"rgba(72,193,110,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["LA"],"y":[4407186],"type":"bar","name":"LA","marker":{"color":"rgba(88,199,101,1)","line":{"color":"rgba(88,199,101,1)"}},"textfont":{"color":"rgba(88,199,101,1)"},"error_y":{"color":"rgba(88,199,101,1)"},"error_x":{"color":"rgba(88,199,101,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["NJ"],"y":[4660094],"type":"bar","name":"NJ","marker":{"color":"rgba(106,205,91,1)","line":{"color":"rgba(106,205,91,1)"}},"textfont":{"color":"rgba(106,205,91,1)"},"error_y":{"color":"rgba(106,205,91,1)"},"error_x":{"color":"rgba(106,205,91,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["IN"],"y":[4885026],"type":"bar","name":"IN","marker":{"color":"rgba(126,211,79,1)","line":{"color":"rgba(126,211,79,1)"}},"textfont":{"color":"rgba(126,211,79,1)"},"error_y":{"color":"rgba(126,211,79,1)"},"error_x":{"color":"rgba(126,211,79,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["PA"],"y":[6401289],"type":"bar","name":"PA","marker":{"color":"rgba(147,215,65,1)","line":{"color":"rgba(147,215,65,1)"}},"textfont":{"color":"rgba(147,215,65,1)"},"error_y":{"color":"rgba(147,215,65,1)"},"error_x":{"color":"rgba(147,215,65,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["VA"],"y":[6806860],"type":"bar","name":"VA","marker":{"color":"rgba(168,219,52,1)","line":{"color":"rgba(168,219,52,1)"}},"textfont":{"color":"rgba(168,219,52,1)"},"error_y":{"color":"rgba(168,219,52,1)"},"error_x":{"color":"rgba(168,219,52,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["TN"],"y":[6886221],"type":"bar","name":"TN","marker":{"color":"rgba(190,223,38,1)","line":{"color":"rgba(190,223,38,1)"}},"textfont":{"color":"rgba(190,223,38,1)"},"error_y":{"color":"rgba(190,223,38,1)"},"error_x":{"color":"rgba(190,223,38,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["NC"],"y":[6999790],"type":"bar","name":"NC","marker":{"color":"rgba(212,226,26,1)","line":{"color":"rgba(212,226,26,1)"}},"textfont":{"color":"rgba(212,226,26,1)"},"error_y":{"color":"rgba(212,226,26,1)"},"error_x":{"color":"rgba(212,226,26,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["OH"],"y":[7435124],"type":"bar","name":"OH","marker":{"color":"rgba(233,229,26,1)","line":{"color":"rgba(233,229,26,1)"}},"textfont":{"color":"rgba(233,229,26,1)"},"error_y":{"color":"rgba(233,229,26,1)"},"error_x":{"color":"rgba(233,229,26,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["IL"],"y":[10907330],"type":"bar","name":"IL","marker":{"color":"rgba(253,231,37,1)","line":{"color":"rgba(253,231,37,1)"}},"textfont":{"color":"rgba(253,231,37,1)"},"error_y":{"color":"rgba(253,231,37,1)"},"error_x":{"color":"rgba(253,231,37,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>This bar plot shows the number of total COVID-19 cases from Feb.15 to Oct.27 for each state. The graph shows that Illinois (IL), Ohio (OH), and North Caroline (NC) have the greatest number of total cases. Maine (ME), Delaware (DE), and Wyoming (WY) have the least number of total cases.</p>
<p><em>By comparing the two graphs, we hypothesized that the total number of cases is a factor in estimating ground transit mobility changes as we can see a significant drop in the use of ground transportation for states with a relatively large number of total cases, such as NJ and Louisiana (LA) and a non-decrease change for states with fewer COVID-19 cases, such as WY and ID. However, we also noticed that though the situation of COVID-19 in some states seems to be more severe than it was in other states, the usage of ground transportation in these states has been decreased less than expected. For example, IL is the state with the greatest number of total cases, but it only has moderate average mobility change among all states.</em></p>
<p><strong>Does this mean that the association between COVID-19 and ground transportation cannot be extrapolated from one state to another? To answer this question, we took a closer look at the situation in IL and LA.</strong></p>
</div>
<div id="il-vs.la" class="section level3">
<h3>IL vs. LA</h3>
<pre class="r"><code>#use plotly to compare the mean transit among each state
#Covid_mobility_data %&gt;%
#  group_by(state) %&gt;%
#   filter(!is.na(transit_stations_percent_change_from_baseline) &amp; new_case &gt;0) #%&gt;%
#  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
#            mean_new_cases = mean(new_case),
#            n = n()) %&gt;%
#  mutate(state = fct_reorder(state, mean_new_cases)) %&gt;% 
#   plot_ly(x = ~state, y = ~mean_new_cases, color = ~state, type = &quot;bar&quot;, colors #= &quot;viridis&quot;)</code></pre>
<pre class="r"><code>plot_ILCA_MEAN_NEWCASE =
Covid_mobility_data %&gt;%
  group_by(date,state) %&gt;%
   filter(!is.na(transit_stations_percent_change_from_baseline)&amp; state == c(&quot;LA&quot;,&quot;IL&quot;)) %&gt;%
  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
            mean_newcases = mean(new_case),
            n = n()) %&gt;%
  ggplot(aes(x = date,y = mean_newcases,color = state)) +
 geom_point(alpha=0.3) +
  geom_smooth()+
  theme(axis.text.x = element_text(angle = 45, hjust = 1))+ 
 scale_x_date(date_breaks = &quot;1 month&quot;) +
    facet_wrap(~state)

plot_ILCA_MEAN_NEWCASE</code></pre>
<p><img src="graphs_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>This panel presents the average mobility change in IL and LA from Feb.15 to Oct.27. Two plots seem to have generally similar trends with an apparent decrease begins from mid-February till mid-April. The trends then start to bounce back, and once it reaches closely to the baseline level it starts to decrease again. The one difference between these two trends is that the second drop in LA is much steeper than in IL.</p>
<pre class="r"><code>plot_ILCA_MEAN_Transit=
Covid_mobility_data %&gt;%
  group_by(date,state) %&gt;%
   filter(!is.na(transit_stations_percent_change_from_baseline)&amp; state == c(&quot;LA&quot;,&quot;IL&quot;)) %&gt;%
  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
            mean_newcases = mean(new_case),
            n = n()) %&gt;%
  ggplot(aes(x = date,y = mean_transit,color = state)) +
 geom_point(alpha=0.3) +
  geom_smooth()+
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
 scale_x_date(date_breaks = &quot;1 month&quot;) +
    facet_wrap(~state)

plot_ILCA_MEAN_Transit</code></pre>
<p><img src="graphs_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>This panel shows the daily confirmed case trends in IL and LA from Feb.15 to Oct.27. We see that an overall continuously increasing trend in IL. The trend tends to drop from the middle of May but back to a more rapid increase since July. On the other hand, the increase in LA is relatively gentle, and its growth stopped as it reached its peak in late July.</p>
<p><em>These plots demonstrate that the trends in daily confirmed cases and mobility changes are quite alike in LA and IL before July, showing evidence that a similar association between COVID-19 and ground transportation exist in IL as well. The primary reason that the decrease in IL’s ground transportation usage is smaller than expected might be that once the daily confirmed cases started decreasing, people started taking public transportation and failed to notice the “second wave” of increased cases.</em></p>
<pre class="r"><code>#plot_ILCA_MEAN_Transit/plot_ILCA_MEAN_NEWCASE</code></pre>
<pre class="r"><code>#Covid_mobility_data %&gt;%
#  group_by(date,state) %&gt;%
#   filter(!is.na(transit_stations_percent_change_from_baseline)&amp; state == #c(&quot;LA&quot;,&quot;IL&quot;)) %&gt;%
#  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
#            sum_totalcases = sum(tot_cases),
#            n = n()) %&gt;%
#  ggplot(aes(x = date,y = sum_totalcases,color = state)) +
# geom_point(alpha=0.3) +
#  geom_smooth()+
# scale_x_date(date_breaks = &quot;1 month&quot;) +
#    facet_wrap(~state)</code></pre>
<pre class="r"><code>##comparing only by date
#Covid_mobility_data %&gt;%
#  group_by(date) %&gt;%
#   filter(!is.na(transit_stations_percent_change_from_baseline)) %&gt;%
#  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
#            sum_newcases = sum(new_case),
#            n = n()) %&gt;%
#  ggplot(aes(x = date,y = sum_newcases,color=&quot;light pink&quot;)) +
# geom_point(aes(size=mean_transit,alpha=0.3))+
# scale_x_date(date_breaks = &quot;1 month&quot;)+   
#  labs(titles = &quot;number of newcases daily&quot;,
#        y = &quot;New Cases&quot;  )
#  </code></pre>
<pre class="r"><code>##comparing only by date
##TRANSIT
#Covid_mobility_data %&gt;%
#  group_by(date) %&gt;%
#   filter(!is.na(transit_stations_percent_change_from_baseline)) %&gt;%
#  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
#             sum_newcases = sum(new_case),
#            n = n()) %&gt;%
#  ggplot(aes(x = date,y = mean_transit,color=&quot;light pink&quot;)) +
# geom_point(aes(size=sum_newcases,alpha=0.3))+
# scale_x_date(date_breaks = &quot;1 month&quot;)+
#    labs(titles = &quot;change in transit after covid&quot;,
#        y = &quot;change in transit from baseline&quot;  )</code></pre>
<p><strong>Economics</strong></p>
</div>
<div id="mobility-trends-for-retail-recreation" class="section level3">
<h3>Mobility Trends for Retail &amp; Recreation</h3>
<pre class="r"><code>Covid_mobility_data %&gt;%
  group_by(date) %&gt;%
   filter(!is.na(retail_and_recreation_percent_change_from_baseline)) %&gt;%
  summarise(mean_retail_recreation = mean(retail_and_recreation_percent_change_from_baseline),
             sum_newcases = sum(new_case),
            n = n()) %&gt;%
  ggplot(aes(x = date,y = mean_retail_recreation,color=&quot;light pink&quot;)) +
 geom_point(aes(size=sum_newcases,alpha=0.3))+
 scale_x_date(date_breaks = &quot;1 month&quot;)+  
  labs(titles = &quot;change in retial and recreation after covid&quot;,
        y = &quot;change in retail and recreation from baseline&quot;  )</code></pre>
<p><img src="graphs_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
<div id="monlthy-personal-consumption-expenditures-in-billion-from-2018-2020" class="section level3">
<h3>Monlthy Personal Consumption Expenditures (in Billion) from 2018-2020</h3>
<pre class="r"><code>personal_consumption_df = 
  read_csv(&quot;./data/personal_consumption.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(date = fred_graph_observations, 
         personal_consumption = x2) %&gt;% 
  select(date, personal_consumption) %&gt;% 
  slice(719:752) %&gt;% 
  mutate(personal_consumption = as.double(personal_consumption),
         personal_consumption = round(personal_consumption, digits = 1))
  
  
personal_consumption_df %&gt;% 
  ggplot(aes(x = date, y = personal_consumption))+
  geom_point(color = &#39;blue&#39;)+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
  labs(x = &quot;Date&quot;, y = &quot;Personal Consumption Expenditure (in Billion)&quot;)</code></pre>
<p><img src="graphs_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
<div id="monthly-unemployment-rate-percentage-from-2018-2020" class="section level3">
<h3>Monthly Unemployment Rate Percentage from 2018-2020</h3>
<pre class="r"><code>unemployment_df = 
  read_csv(&quot;./data/unemployment_rate.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(date = fred_graph_observations, 
         unemployment_rate = x2) %&gt;% 
  select(date, unemployment_rate) %&gt;% 
  slice(851:884)
  
  
unemployment_df %&gt;% 
  ggplot(aes(x = date, y = unemployment_rate))+
  geom_point(color = &#39;blue&#39;)+
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
  labs(x = &quot;Date&quot;, y = &quot;Unemployment Rate&quot;)</code></pre>
<p><img src="graphs_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<pre class="r"><code>#Covid_mobility_data %&gt;%
#  group_by(date) %&gt;%
#   filter(!is.na(residential_percent_change_from_baseline)) %&gt;%
#  summarise(mean_residential = mean(residential_percent_change_from_baseline),
#             sum_newcases = sum(new_case),
#            n = n()) %&gt;%
#  ggplot(aes(x = date,y = mean_residential,color=&quot;light pink&quot;)) +
# geom_point(aes(size=sum_newcases,alpha=0.3))+
# scale_x_date(date_breaks = &quot;1 month&quot;)+  
#  labs(titles = &quot;change in retial and recreation after covid&quot;,
#        y = &quot;change in retail and recreation from baseline&quot;  )
#  </code></pre>
<pre class="r"><code>##comparing only by state
#Covid_mobility_data %&gt;%
#  group_by(state) %&gt;%
#   filter(!is.na(transit_stations_percent_change_from_baseline)) %&gt;%
#  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
#            mean_newcases = mean(new_case),
#            n = n()) </code></pre>
<pre class="r"><code>#mean_Covid_mobility_data =
#  Covid_mobility_data %&gt;%
#  group_by(state) %&gt;%
#   filter(!is.na(transit_stations_percent_change_from_baseline)) %&gt;%
#  summarise(mean_transit = mean(transit_stations_percent_change_from_baseline),
#            mean_newcases = mean(new_case),
#            n = n()) </code></pre>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
